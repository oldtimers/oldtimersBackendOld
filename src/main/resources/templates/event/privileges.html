<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header_fragment :: headerFragment (title='Edit privileges')"></head>
<body>
<div class="card card-bord">
    <form method="post" th:action="@{__${action}__/privileges}" th:object="${privileges}">
        <table class="table">
            <tr>
                <th>User</th>
                <th>Privilege</th>
                <th>Action</th>
            </tr>
            <!--/*@thymesVar id="privilege" type="pl.pazurkiewicz.oldtimers_rally.model.UserGroup"*/-->
            <tr th:each="privilege, info : ${privileges.privileges}">
                <td th:text="${privilege.user.login}"></td>
                <td>
                    <label>
                        <select th:field="${privileges.privileges[__${info.index}__].selectedGroup}">
                            <option th:each="p : ${privileges.groupEnums}"
                                    th:text="${p.key}"
                                    th:value="${p.value}">
                            </option>
                        </select>
                    </label>
                </td>
                <td>
                    <button class="btn btn-primary row-link links" name="delete" th:value="${info.index}"
                            type="submit">Delete
                    </button>
                </td>
            </tr>
            <tr>
                <td>
                    <label>
                        <input th:field="*{newUser}" type="text">
                    </label>
                    <p th:errors="*{newUser}"></p>
                </td>
                <td>
                    <label>
                        <select th:field="*{newGroupEnum}">
                            <option th:each="p : ${privileges.groupEnums}"
                                    th:text="${p.key}"
                                    th:value="${p.value}">
                            </option>
                        </select>
                    </label>
                </td>
                <td>
                    <button class="btn btn-primary row-link links" name="add" type="submit">Add</button>
                </td>
            </tr>
        </table>

        <button class="btn btn-primary" name="reload" th:text="Reset" type="submit"></button>
        <button class="btn btn-primary" th:text="Save" type="submit"></button>
    </form>
</div>
<div class="card card-bord">
    <a class="btn btn-primary" th:href="@{__${action}__}">Back</a>
</div>
</body>
</html>
